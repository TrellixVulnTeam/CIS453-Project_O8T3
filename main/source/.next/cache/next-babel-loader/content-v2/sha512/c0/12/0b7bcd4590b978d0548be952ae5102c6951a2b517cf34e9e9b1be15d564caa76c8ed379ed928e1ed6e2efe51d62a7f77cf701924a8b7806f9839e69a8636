{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _taggedTemplateLiteral from \"C:/Users/Ian/Desktop/ECPI CIS/CIS453/Week 1/Lab/gute-main/main/source/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  text-transform: uppercase;\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  text-align: center;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  margin-bottom: \", \"rem;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport GUButton from '@components/control/gu-button';\nimport Loading from '@components/other/loading';\nimport Product from '@components/product';\nimport { handleGetProducts } from '@store/thunk/products';\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport styled from 'styled-components';\nimport ShopHeader from './shared/shop-header';\nimport ShopSidebar from './shared/shop-sidebar';\nvar StyledProduct = styled(Product)(_templateObject(), 20 / 14);\nvar ButtonContaier = styled.div(_templateObject2());\nvar StyledButton = styled(GUButton)(_templateObject3());\n\nvar ShopLayout = function ShopLayout() {\n  var dispatch = useDispatch();\n\n  var _useState = useState(''),\n      currentSort = _useState[0],\n      setCurrentSort = _useState[1];\n\n  var _useState2 = useState(9),\n      currentView = _useState2[0],\n      setCurrentView = _useState2[1];\n\n  var _useState3 = useState([]),\n      selectedCategoriesId = _useState3[0],\n      setSelectedCategoriesId = _useState3[1];\n\n  var _useState4 = useState({\n    minPrice: null,\n    maxPrice: null\n  }),\n      priceRange = _useState4[0],\n      setPriceRange = _useState4[1];\n\n  var _useSelector = useSelector(function (state) {\n    return state.product.list;\n  }),\n      data = _useSelector.data,\n      fetching = _useSelector.fetching,\n      meta = _useSelector.meta,\n      loadingMore = _useSelector.loadingMore;\n\n  var _useMemo = useMemo(function () {\n    return currentSort.split(':');\n  }, [currentSort]),\n      sortKey = _useMemo[0],\n      sortValue = _useMemo[1];\n\n  useEffect(function () {\n    dispatch(handleGetProducts({\n      _page: 1,\n      _limit: currentView,\n      _sort: sortKey,\n      _order: sortValue,\n      'categories.id_like': selectedCategoriesId.join('|') || null,\n      price_gte: priceRange.minPrice || null,\n      price_lte: priceRange.maxPrice || null\n    }));\n  }, [currentSort, currentView, selectedCategoriesId, priceRange]);\n\n  var onLoadingMore = function onLoadingMore() {\n    if (meta && data.length && meta.page < meta.pageCount) {\n      dispatch(handleGetProducts({\n        _limit: currentView,\n        _page: meta.page + 1,\n        _sort: sortKey,\n        _order: sortValue,\n        loadingMore: true,\n        'categories.id_like': selectedCategoriesId.join('|') || null,\n        price_gte: priceRange.minPrice || null,\n        price_lte: priceRange.maxPrice || null\n      }));\n    }\n  };\n\n  return /*#__PURE__*/_jsx(\"div\", {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxs(\"div\", {\n      className: \"row\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"col-12 col-md-4 col-lg-3\",\n        children: /*#__PURE__*/_jsx(ShopSidebar, {\n          onFilterPrice: function onFilterPrice(_ref) {\n            var minPrice = _ref.minPrice,\n                maxPrice = _ref.maxPrice;\n            return setPriceRange({\n              minPrice: minPrice,\n              maxPrice: maxPrice\n            });\n          },\n          getSelectedCategoriesId: function getSelectedCategoriesId(ids) {\n            return setSelectedCategoriesId(ids);\n          }\n        })\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"col-12 col-md-8 col-lg-9\",\n        children: [/*#__PURE__*/_jsx(ShopHeader, {\n          getCurrentSort: function getCurrentSort(val) {\n            return setCurrentSort(val);\n          },\n          getCurrentView: function getCurrentView(val) {\n            return setCurrentView(val);\n          }\n        }), fetching ? /*#__PURE__*/_jsx(Loading, {}) : /*#__PURE__*/_jsx(\"div\", {\n          className: \"shop-content\",\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"row\",\n            children: data === null || data === void 0 ? void 0 : data.map(function (product) {\n              return /*#__PURE__*/_jsx(\"div\", {\n                className: \"col-12 col-sm-6 col-lg-4\",\n                children: /*#__PURE__*/_jsx(StyledProduct, {\n                  data: product\n                })\n              });\n            })\n          })\n        }), meta && meta.page < meta.pageCount && /*#__PURE__*/_jsx(ButtonContaier, {\n          children: /*#__PURE__*/_jsx(StyledButton, {\n            disabled: loadingMore,\n            preffix: loadingMore && /*#__PURE__*/_jsx(\"i\", {\n              className: \"fal fa-spinner-third\"\n            }),\n            onClick: onLoadingMore,\n            variant: \"contained\",\n            shape: \"round\",\n            weight: \"bold\",\n            children: \"Load more posts\"\n          })\n        })]\n      })]\n    })\n  });\n};\n\nexport default ShopLayout;","map":null,"metadata":{},"sourceType":"module"}